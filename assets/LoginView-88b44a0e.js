import{u as _,r as c,o as f,c as h,w as p,v as m,a,b as w,d as v,e as g,_ as x,f as b,g as k,h as y,i as L,j as S,k as V,l as A}from"./index-1ac97501.js";const T=a("h1",{class:"inline-flex items-center gap-4 text-2xl font-bold dark:text-soft-black"},"Login",-1),$=a("label",{for:"email"},"Email",-1),j=a("label",{for:"password"},"Password",-1),N={__name:"LoginWithPassword",props:["isAdmin"],setup(l){const o=l,n=_(),t=c(""),i=c(""),u=async()=>{try{const e=new Headers;e.append("Content-Type","application/json");var r={method:"POST",body:JSON.stringify({email:t.value,password:i.value}),headers:e};const d=await(await fetch(`http://localhost:4000/api/${o.isAdmin?"admin":"user"}/authentication`,r)).json();k("token",o.isAdmin?d.admin.token:d.user.token)}catch(e){console.log(e),n.error(y(e))}};return(r,e)=>(f(),h("form",{onSubmit:e[2]||(e[2]=b((...s)=>r.onSubmit&&r.onSubmit(...s),["prevent"])),class:"flex flex-col gap-4 w-full"},[T,$,p(a("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s)},null,512),[[m,t.value]]),j,p(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s)},null,512),[[m,i.value]]),w(x,{type:"submit",onClick:u},{default:v(()=>[g("Login")]),_:1})],32))}},B={class:"mx-auto flex h-full w-[28rem] place-items-center overflow-y-hidden"},P={__name:"LoginView",setup(l){const{user:o}=L("user"),n=S(),t=()=>{o.value.isLogged&&n.push("/")};return t(),V(o.value,()=>{t()}),(i,u)=>(f(),h("main",B,[w(N,{isAdmin:A(n).currentRoute.value.path==="/login-admin"},null,8,["isAdmin"])]))}};export{P as default};
